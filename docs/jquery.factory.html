<!DOCTYPE html>  <html> <head>   <title>jquery.factory.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.factory.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h2>A Klass Constructor Factory</h2>

<p>Underscore.js 1.2.1
© 2011 Thomas Appel, (http://thomas-appel.com)
jquery.factory.js is dual licensed under the
<a href="http://dev.thomas-appel.com/mit.txt">MIT</a> and
<a href="http://dev.thomas-appel.com/gpl.txt">GPL</a> license.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

	<span class="kd">var</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nx">$</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>creates an empty object. See <a href="#section-6">factory.createObject</a></p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">objectCreate</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>

			<span class="k">return</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
				<span class="kd">function</span> <span class="nx">F</span><span class="p">()</span> <span class="p">{}</span>
				<span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">;</span>
					<span class="k">return</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span>
				<span class="p">};</span>
			<span class="p">}</span> <span class="p">());</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}());</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Make sure this plays nicely if jquery is loaded via AMD</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">jQuery</span> <span class="o">=</span> <span class="nx">$</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">require</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jquery&#39;</span><span class="p">).</span><span class="nx">$</span> <span class="o">||</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jquery&#39;</span><span class="p">)))</span> <span class="o">||</span> <span class="nx">root</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h3>The Klass Constructor</h3>

<ul>
<li>namespace: jQuery</li>
<li>name factory</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">factory</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">O</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span>
		<span class="nx">_hasProp</span> <span class="o">=</span> <span class="nx">O</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">;</span>

		<span class="kd">function</span> <span class="nx">init</span><span class="p">(</span><span class="nx">constr</span><span class="p">,</span> <span class="nx">__super</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
				<span class="nx">__super</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
				<span class="nx">constr</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
			<span class="p">};</span>
		<span class="p">}</span>

		<span class="kd">function</span> <span class="nx">mixin</span><span class="p">(</span><span class="nx">strg</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span>
			<span class="nx">newObj</span> <span class="o">=</span> <span class="p">{};</span>
			<span class="nx">strg</span> <span class="o">=</span> <span class="nx">strg</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
			<span class="nx">l</span> <span class="o">=</span> <span class="nx">strg</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

			<span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">method</span> <span class="o">=</span> <span class="nx">strg</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">_hasProp</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">method</span><span class="p">))</span> <span class="p">{</span>
					<span class="nx">newObj</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">method</span><span class="p">];</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="nx">newObj</span><span class="p">;</span>
		<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <ul>
<li>prameters:
<ul><li>parent: the parent Contructur which should be extended. Note,
that it has to be a contructur function build with jquery.factory</li>
<li>constructor: (type: Function) the actual constructor function. Put your
initializing code here</li>
<li>methods: (type: Object or String) an Object which becomes the contructor prototype</li>
<li>obj: (type: Object) Additional, for creating Mixins. The Object you want to lend methods and
properties form. Note: if you set the 'obj' param, pass param 'methods' as string representing the method/property names of the 'obj' object separated by a single space</li></ul></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">constructor</span><span class="p">,</span> <span class="nx">methods</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">prototype</span> <span class="o">=</span> <span class="nx">objectCreate</span><span class="p">(</span><span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">||</span> <span class="nx">O</span><span class="p">),</span>
			<span class="nx">__super</span><span class="p">;</span>
			<span class="nx">methods</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">methods</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span> <span class="o">?</span> <span class="nx">methods</span> <span class="o">:</span> <span class="nx">mixin</span><span class="p">(</span><span class="nx">methods</span><span class="p">,</span> <span class="nx">obj</span><span class="p">);</span>
			<span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">methods</span><span class="p">);</span>
			<span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">init</span><span class="p">(</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">__super</span> <span class="o">=</span> <span class="nx">parent</span> <span class="o">?</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">:</span> <span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span><span class="p">);</span>
			<span class="nx">prototype</span><span class="p">.</span><span class="nx">__super</span> <span class="o">=</span> <span class="nx">__super</span><span class="p">;</span>
			<span class="nx">constructor</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span><span class="p">;</span>
			<span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">;</span>
			<span class="k">return</span> <span class="nx">constructor</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">}());</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h3>factory.createObject</h3>

<p>static method</p>

<p>creates an Empty Object</p>

<ul>
<li>parameters:
<ul><li>obj: (type: Object). obj will be added to the Object’s prototype chain</li></ul></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">jQuery</span><span class="p">.</span><span class="nx">factory</span><span class="p">.</span><span class="nx">createObject</span> <span class="o">=</span> <span class="nx">objectCreate</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <hr />

<h3>basic example usage:</h3>

<pre><code>var Animal = $.factory(null, function () {
    this.alive = true;
}, {
    sleep: function () {
       if (this.alive) return 'zzz';
}
});


var Mamel = $.factory(Animal, function (name) {
   this.name = name || 'mamel';
}, {
    breastFeeds: function () {
       if (this.alive) return 'suckle';
   }
});

var Dog = $.factory(Mamel, function () {
   this.smells = 'badly';
}, {
    bark: function () {
       if (this.alive) return 'woof';
   }
});


var microbe = new Animal();
microbe.alive // true
microbe.sleep(); // zzz

var higherAnimal = new Mamel('cow');
higherAnimal.name // cow
higherAnimal.alive; // true
higherAnimal.sleep(); // zzz
higherAnimal.breastFeeds(); // suckle

var lucy = new Dog('lucy');
lucy.name // lucy
lucy.alive; // true
lucy.smells; // badly
lucy.sleep(); // zzz
lucy.breastFeeds(); // suckle
lucy.bark(); // woof
</code></pre>

<h3>Create Mixins, part 1</h3>

<pre><code>var myMethods= {
    call: function (name) {
        alert(name);
    },
    die: function () {
        return false;
    }
},
myOtherMethofs = {
    setName: function (name) {
        this.name = name;
    }
};

$.factory(null, function() {}, {
    call: myMethods.call,
    die: myMethods.die,
    setName: myOtherMethofs.setName
 });
</code></pre>

<h3>Create Mixins, part II: just pass property/method names and their corresponding Object</h3>

<pre><code>$.factory(null, contructor, 'call die', myMethods);
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">}(</span><span class="k">this</span><span class="p">));</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 